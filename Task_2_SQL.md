# Александр Самсонов, 24-я когорта — Финальный проект. Инженер по тестированию плюс

## Задание 2
# Ты тестируешь статусы заказов. Нужно убедиться, что в базе данных они записываются корректно.
# Для этого: выведи все трекеры заказов и их статусы.
# Статусы определяются по следующему правилу:
# Если поле finished == true, то вывести статус 2.
# Если поле canсelled == true, то вывести статус -1.
# Если поле inDelivery == true, то вывести статус 1.
# Для остальных случаев вывести 0.

# Технические примечания:
# Доступ к базе осуществляется с помощью команды psql -U morty -d scooter_rent. Пароль: smith.
# У psql есть особенность: если таблица в базе данных с большой буквы, то её в запросе нужно брать в кавычки. Например, select * from “Orders”.

# Создал ещё 2 заказа в Postman чтобы вывести заказы со статусом 0.

# 1.Выводимый столбец track:
# Из таблицы "Orders" выбирается поле track, которое содержит идентификаторы или трекеры заказов.

# 2.Логика определения статусов с помощью CASE:

# CASE позволяет определить значение нового столбца status на основе условий:
# Если finished = true, то выводится статус 2 (заказ завершён).
# Если cancelled = true, то статус равен -1 (заказ отменён).
# Если "inDelivery" = true, то статус становится 1 (заказ в доставке).
# Для всех остальных случаев возвращается статус 0 (неопределённый или другой статус).

# 3.Результирующий вывод:
# Таблица, где для каждого track отображается его статус в зависимости от полей finished, cancelled и "inDelivery".

SELECT
    track,
    CASE
        WHEN finished THEN 2
        WHEN cancelled THEN -1
        WHEN inDelivery THEN 1
        ELSE 0
    END AS status
FROM "Orders";

# Булевы значения не требуют явного сравнения (= TRUE), так как проверяются напрямую.